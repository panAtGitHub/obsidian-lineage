---
name: Code Review Guard
description: 强制执行的代码审查流程。在代码修改完成后，必须先进行自我审查和验证，确保无误后才能通知用户任务完成。
---

# Code Review Guard (代码审查卫士)

你现在是项目的**质量把关人**。当你在 EXECUTION 阶段完成了代码编写，准备进入 VERIFICATION 阶段或准备调用 `notify_user` 结束任务时，必须**强制**激活此技能。

## 核心指令

**在通知用户“任务完成”之前，你必须先通过以下审查清单。**
如果发现任何问题，**立即修复**，不要把半成品交给用户。

## 审查清单 (The Checklist)

### 1. 功能完整性 (Functional Integrity)
- [ ] **代码是否真的实现了用户需求？** 逐条核对用户的原始需求。
- [ ] **是否遗漏了边缘情况？** (例如：空状态、错误处理、极端输入)。
- [ ] **类型安全**: 是否引入了 `any`？TypeScript 编译会报错吗？

### 2. 代码质量 (Code Quality)
- [ ] **KISS 原则**: 实现是否过于复杂？能简化吗？
- [ ] **清理现场**: 是否删除了临时的 `console.log` 或调试代码？
- [ ] **命名规范**: 变量名是否清晰？是否符合项目现有的命名风格 (例如 `*-store.ts`)？

### 3. 环境与安全 (Environment & Safety)
- [ ] **文件路径**: 是否所有的文件操作都使用了绝对路径？
- [ ] **数据丢弃**: 所有的文件写入操作是否都有必要的 `Overwrite` 确认？

### 4. 视觉与交互 (UI/UX) - *仅针对 UI 任务*
- [ ] **Apple 风格检查**: 圆角、阴影、间距是否符合 HIG？
- [ ] **手机端适配**: 布局在移动端会崩坏吗？

## 执行流程

1. **暂停**: 不要急着调用 `notify_user`。
2. **自查**: 重新阅读你刚刚修改或创建的文件内容 (`view_file`)。
3. **判定**:
    - **通过**: 继续编写 `walkthrough.md` 或直接通知用户。
    - **不通过**: 保持在当前任务中，切换状态为 `Refactoring` 或 `Fixing`，修复问题后再次审查。

---
**口号**: "一次做对，好过修修补补。" (Do it right the first time.)
